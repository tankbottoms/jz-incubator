# Gnosis Safe Snapshot, and Token Calculation

TLDR; with a properly setup .env file and `ledger.csv` of transactions, of ETH and DAI transferred to a Gnosis Safe, the price of DAI / ETH is fetched and computed on a bonding curve and a summary of token pricing is provided along with suggestions for other DAO treasury allocations, converted into a Merkle root, which can then be used on an accompanying claim and stake page. The employed Solidity Bonding curve is used along with a fork of [TributeDAO's DAO Framework](https://tributelabs.xyz/) which can be found in large part in `./contracts`.

To learn more about Tribute DAO's Framework and see a [demo](https://tributedao.com/). The full updated fork of Tribute DAO can be found here, for the Movement DAO, [move-monorepo](https://github.com/themovementdao/move-monorepo).

```bash
npx ts-node ./scripts/bonding-curve-simulator.ts
# or
yarn run bonding-curve
```

The following output is expected.

```bash

    ############################################################
    #                   Deploy Contracts                       #
    ############################################################

Deployed BancorFormula to the following address => 0x9714739c99C12D1dD0A7A399C0A873585dE9B546
Deployed BondingCurve to the following address => 0x2e890c669f003EE0f66082a1765d74783463F37e
Deployed Endowment to the following address => 0x6838FbDE53959C3FF6d31512753f1801DA6c960F
Deployed DaoRegistry to the following address => 0xaEEe2201c5296A889C9d4308caF757D4372490ec

    ############################################################
    #                   Initialize Curve                       #
    ############################################################

Bonding curve initialization parameters:
Formula: 0x9714739c99C12D1dD0A7A399C0A873585dE9B546
Movement: 0xaEEe2201c5296A889C9d4308caF757D4372490ec
Endowment: 0x6838FbDE53959C3FF6d31512753f1801DA6c960F
Initiative_goal: 1000000000000000000
Beneficiary: 0x6838FbDE53959C3FF6d31512753f1801DA6c960F
BuyFeePct: 0
SellFeePct: 0
TimeStart: 1646419389
TimeCooldown: 1646518389
TimeEnd: 1656418389

  ############################################################
  #                   Add collateral token                   #
  ############################################################

Zero Token: 0x0000000000000000000000000000000000000000
Token Parameters: 5000000000000000000,4000000000000000000,true,150000
Price 1 token = 5.875784672094737537 Ξ
Price 1 token in USD = 15499.934241168808512157 USD

  ############################################################
  #                   Make Buy Order                         #
  ############################################################

(1) Start token price = 5.875784672094737537 eth, 15499.934241168809 $
(1) Block: 14322142, Timestamp: 1646428394, 0x4Ab54c9eA8b56db62832ed20654F373B7305dB0c bought tokens with eth 0.015 ($ 39.569015304749996), received 0.002808027916109726 $TOKENS, 14,091.389575488754 USD/$TOKEN, 5.341827235386310768 eth/$TOKEN
(1) End token price = 5.892556358312593723 eth, 15544.176848411529135774 $

{ exchangePriceDai: 1.00055439, exchangePriceEth: 2637.93435365 }
(2) Start token price = 5.892556358312593723 eth, 15544.17684841153 $
(2) Block: 14322143, Timestamp: 1646428397, 0x4Ab54c9eA8b56db62832ed20654F373B7305dB0c bought tokens with eth 0.005689419764837445 ($ 15.008315850000002), received 0.001062737789515522 $TOKENS, 14,122.313140706092 USD/$TOKEN, 5.353549879346176432 eth/$TOKEN
(2) End token price = 5.898915452812947713 eth, 15560.951722252120816847 $

(3) Start token price = 5.898915452812947713 eth, 15560.95172225212 $
(3) Block: 14322144, Timestamp: 1646428398, 0x4Ab54c9eA8b56db62832ed20654F373B7305dB0c bought tokens with eth 0.01 ($ 26.379343536500002), received 0.00186482556361157 $TOKENS, 14,145.743200458739 USD/$TOKEN, 5.362431851606110911 eth/$TOKEN
(3) End token price = 5.910089427033857312 eth, 15590.427932716256691492 $

(4) Start token price = 5.910089427033857312 eth, 15590.427932716257 $
(4) Block: 14322145, Timestamp: 1646428400, 0xAE13245d7ab6621b8583F5a734F8F8728dE4Dcd1 bought tokens with eth 0.78 ($ 2,057.5887958470003), received 0.134607460966276241 $TOKENS, 15,285.845086718457 USD/$TOKEN, 5.794626794092911481 eth/$TOKEN
(4) End token price = 6.770384239685072636 eth, 17859.829173275789798936 $

(5) Start token price = 6.770384239685072636 eth, 17859.82917327579 $
(5) Block: 14322146, Timestamp: 1646428401, 0xC5c8eff68183581f8a108CE6414a21a6675A4b79 bought tokens with eth 1.5 ($ 3,956.901530475), received 0.21358495032349045 $TOKENS, 18,526.125199748276 USD/$TOKEN, 7.022966729295005095 eth/$TOKEN
(5) End token price = 8.372310211517339340 eth, 22085.604726376288454048 $

(6) Start token price = 8.372310211517339340 eth, 22085.60472637629 $
(6) Block: 14322147, Timestamp: 1646428402, 0x2843b4E0e0B7B812C1B574C77a54308dAed0d0A2 bought tokens with eth 0.11067 ($ 291.9401949184455), received 0.013979856692966026 $TOKENS, 20,882.91756705456 USD/$TOKEN, 7.916390162689126875 eth/$TOKEN
(6) End token price = 8.488190861729535186 eth, 22391.290274494338518707 $

(7) Start token price = 8.488190861729535186 eth, 22391.29027449434 $
(7) Block: 14322148, Timestamp: 1646428404, 0xdeFD0dE775d82A61D1A93efC18913e7B16906e1c bought tokens with eth 1.2 ($ 3,165.52122438), received 0.139736284215903675 $TOKENS, 22,653.53799940048 USD/$TOKEN, 8.587604906868028465 eth/$TOKEN
(7) End token price = 9.727473276649584832 eth, 25660.435930686271603918 $

{ exchangePriceDai: 1.00055439, exchangePriceEth: 2637.93435365 }
(8) Start token price = 9.727473276649584832 eth, 25660.43593068627 $
(8) Block: 14322149, Timestamp: 1646428406, 0x4Ab54c9eA8b56db62832ed20654F373B7305dB0c bought tokens with eth 0.000379294650989163 ($ 1.00055439), received 0.000041114235618106 $TOKENS, 24,335.959916505737 USD/$TOKEN, 9.225384961848304144 eth/$TOKEN
(8) End token price = 9.727860340455617205 eth, 25661.456979597256577108 $

(9) Start token price = 9.727860340455617205 eth, 25661.456979597257 $
(9) Block: 14322150, Timestamp: 1646428408, 0x4Ab54c9eA8b56db62832ed20654F373B7305dB0c bought tokens with eth 0.001 ($ 2.63793435365), received 0.00010838822423236 $TOKENS, 24,337.831644836817 USD/$TOKEN, 9.226094505028743953 eth/$TOKEN
(9) End token price = 9.728880810389455291 eth, 25664.148912292595923645 $

(10) Start token price = 9.728880810389455291 eth, 25664.148912292596 $
(10) Block: 14322151, Timestamp: 1646428409, 0x580756206Bc33BDf63F26e46eb1BaD3BC5c53a54 bought tokens with eth 0.3 ($ 791.380306095), received 0.031983645041934682 $TOKENS, 24,743.2806691482 USD/$TOKEN, 9.379793941768092225 eth/$TOKEN
(10) End token price = 10.034168020267074439 eth, 26469.476530958727380494 $

{ exchangePriceDai: 1.00055439, exchangePriceEth: 2637.93435365 }
(11) Start token price = 10.034168020267074439 eth, 26469.476530958727 $
(11) Block: 14322152, Timestamp: 1646428412, 0x58F09dd6DF8dFCe8c209A00BaE4348002BACac1d bought tokens with eth 455 ($ 1,200,260.13091075), received 4.657571699722444313 $TOKENS, 257,700.83818189555 USD/$TOKEN, 97.690390902004679674 eth/$TOKEN
(11) End token price = 302.920274254193941488 eth, 799083.797872217837721109 $

{ exchangePriceDai: 1.00055439, exchangePriceEth: 2637.93435365 }
(12) Start token price = 302.920274254193941488 eth, 799083.7978722178 $
(12) Block: 14322153, Timestamp: 1646428414, 0x752515a3A1091b9f1c04416CF79D1F14d2340085 bought tokens with eth 3712 ($ 9,792,012.3207488), received 3.985329961818342916 $TOKENS, 2,457,014.2032307675 USD/$TOKEN, 931.415976986348823630 eth/$TOKEN
(12) End token price = 1962.651171515261921741 eth, 5177344.949571527540683746 $

(13) Start token price = 1962.651171515261921741 eth, 5177344.949571528 $
(13) Block: 14322154, Timestamp: 1646428416, 0xB66426c5D88309668dBE013C118831642F532DD0 bought tokens with eth 57.325246818563798504 ($ 151,220.2379141548), received 0.029042005253612153 $TOKENS, 5,206,948.920834127 USD/$TOKEN, 1973.873577873341673694 eth/$TOKEN
(13) End token price = 1985.531510160903508222 eth, 5237701.780908011831343174 $

(14) Start token price = 1985.531510160903508222 eth, 5237701.780908012 $
(14) Block: 14322155, Timestamp: 1646428417, 0xfE021e62637Cf8B880a76b09E94904693D38256A bought tokens with eth 79.93165732598 ($ 210,854.46480438233), received 0.039941650830495971 $TOKENS, 5,279,062.342695965 USD/$TOKEN, 2001.210657646406843924 eth/$TOKEN
(14) End token price = 2017.357432795298791461 eth, 5321656.475561889819800854 $

{ exchangePriceDai: 1.00055439, exchangePriceEth: 2637.93435365 }
(15) Start token price = 2017.357432795298791461 eth, 5321656.47556189 $
(15) Block: 14322156, Timestamp: 1646428420, 0xD78368092Cb1079e3DdaE7f192F5dCdE53949CCD bought tokens with eth 1137 ($ 2,999,331.36010005), received 0.509163855075247539 $TOKENS, 5,890,699.683811587 USD/$TOKEN, 2233.072887375256868836 eth/$TOKEN
(15) End token price = 2461.291554970173820038 eth, 6492725.547204448841512203 $

(16) Start token price = 2461.291554970173820038 eth, 6492725.547204449 $
(16) Block: 14322157, Timestamp: 1646428421, 0x58F09dd6DF8dFCe8c209A00BaE4348002BACac1d bought tokens with eth 687.175562 ($ 1,812,724.0219885455), received 0.265318670534001811 $TOKENS, 6,832,252.017319815 USD/$TOKEN, 2590.000773850309087720 eth/$TOKEN
(16) End token price = 2722.712151287238611985 eth, 7182335.918980902992188931 $

(17) Start token price = 2722.712151287238611985 eth, 7182335.918980903 $
(17) Block: 14322158, Timestamp: 1646428422, 0xe4918B846156782a8454AcB1332BEeeA9B523763 bought tokens with eth 0.4 ($ 1,055.17374146), received 0.000146918439714122 $TOKENS, 7,182,037.486330419 USD/$TOKEN, 2722.599020098029541259 eth/$TOKEN
(17) End token price = 2722.862996887961344328 eth, 7182733.839773146435618401 $

(18) Start token price = 2722.862996887961344328 eth, 7182733.839773146 $
(18) Block: 14322159, Timestamp: 1646428424, 0xb44A14dEcD9270E34E2dDaff4CD8690a2Cb88461 bought tokens with eth 0.96297 ($ 2,540.2516445343404), received 0.000353661741456546 $TOKENS, 7,182,715.422008569 USD/$TOKEN, 2722.856014999063518189 eth/$TOKEN
(18) End token price = 2723.226140309879610868 eth, 7183691.788281126879155636 $

(19) Start token price = 2723.226140309879610868 eth, 7183691.788281127 $
(19) Block: 14322160, Timestamp: 1646428425, 0xb44A14dEcD9270E34E2dDaff4CD8690a2Cb88461 bought tokens with eth 0.364 ($ 960.2081047286), received 0.000133670878000926 $TOKENS, 7,183,375.459851084 USD/$TOKEN, 2723.106225108197577356 eth/$TOKEN
(19) End token price = 2723.363405294603580842 eth, 7184053.884299883618950844 $

(20) Start token price = 2723.363405294603580842 eth, 7184053.884299884 $
(20) Block: 14322161, Timestamp: 1646428427, 0xdeFD0dE775d82A61D1A93efC18913e7B16906e1c bought tokens with eth 1.2 ($ 3,165.52122438), received 0.000440625508377106 $TOKENS, 7,184,153.3551680185 USD/$TOKEN, 2723.401113157954114286 eth/$TOKEN
(20) End token price = 2723.815918575663545198 eth, 7185247.584629474207758904 $

(21) Start token price = 2723.815918575663545198 eth, 7185247.584629474 $
(21) Block: 14322162, Timestamp: 1646428428, 0xAE13245d7ab6621b8583F5a734F8F8728dE4Dcd1 bought tokens with eth 0.766923 ($ 2,023.092528304319), received 0.000281566521358423 $TOKENS, 7,185,131.664602279 USD/$TOKEN, 2723.771975091234253341 eth/$TOKEN
(21) End token price = 2724.105113996188720193 eth, 7186010.463164195418357849 $

(22) Start token price = 2724.105113996188720193 eth, 7186010.463164195 $
(22) Block: 14322163, Timestamp: 1646428429, 0xC5c8eff68183581f8a108CE6414a21a6675A4b79 bought tokens with eth 1.5 ($ 3,956.901530475), received 0.000550620491282496 $TOKENS, 7,186,259.12606095 USD/$TOKEN, 2724.199378243670707889 eth/$TOKEN
(22) End token price = 2724.670726346583251143 eth, 7187502.511414150707423687 $

(23) Start token price = 2724.670726346583251143 eth, 7187502.511414151 $
(23) Block: 14322164, Timestamp: 1646428431, 0x2843b4E0e0B7B812C1B574C77a54308dAed0d0A2 bought tokens with eth 0.11433 ($ 301.5950346528045), received 0.000041963605280131 $TOKENS, 7,187,062.041964355 USD/$TOKEN, 2724.503751209697838931 eth/$TOKEN
(23) End token price = 2724.713836470044952875 eth, 7187616.233089819550514221 $

(24) Start token price = 2724.713836470044952875 eth, 7187616.23308982 $
(24) Block: 14322165, Timestamp: 1646428432, 0x58Ba373d9eE46ED5402a6A15fE9CcADc67dE1650 bought tokens with eth 0.1 ($ 263.793435365), received 0.000036703387474673 $TOKENS, 7,187,168.637963715 USD/$TOKEN, 2724.544160099787404761 eth/$TOKEN
(24) End token price = 2724.751543118034987856 eth, 7187715.700751913711428642 $

(25) Start token price = 2724.751543118034987856 eth, 7187715.700751914 $
(25) Block: 14322166, Timestamp: 1646428433, 0x872C95b2284e089FCB205D5DcF8E40b9E4Caea97 bought tokens with eth 1.12 ($ 2,954.4864760880005), received 0.000411043239485132 $TOKENS, 7,187,775.378056955 USD/$TOKEN, 2724.774165858801097784 eth/$TOKEN
(25) End token price = 2725.173851284757802205 eth, 7188829.721972739323973656 $

(26) Start token price = 2725.173851284757802205 eth, 7188829.721972739 $
(26) Block: 14322167, Timestamp: 1646428434, 0x74F2305790da72386a1d1d32d82b8DB8164C0704 bought tokens with eth 3 ($ 7,913.80306095), received 0.001100694923372079 $TOKENS, 7,189,824.258210754 USD/$TOKEN, 2725.550864547668879823 eth/$TOKEN
(26) End token price = 2726.304976985402390710 eth, 7191813.557316766120493412 $

{ exchangePriceDai: 1.00055439, exchangePriceEth: 2637.93435365 }
(27) Start token price = 2726.304976985402390710 eth, 7191813.557316766 $
(27) Block: 14322168, Timestamp: 1646428437, 0x211be2dDC09c482B27Ed780A710b18d8Cb76328E bought tokens with eth 0.007585893019783259 ($ 20.0110878), received 0.000002782672396266 $TOKENS, 7,191,320.051491649 USD/$TOKEN, 2726.117896581208697171 eth/$TOKEN
(27) End token price = 2726.307837079939417890 eth, 7191821.102058399468660355 $

{ exchangePriceDai: 1.00055439, exchangePriceEth: 2637.93435365 }
(28) Start token price = 2726.307837079939417890 eth, 7191821.1020583995 $
(28) Block: 14322169, Timestamp: 1646428439, 0x211be2dDC09c482B27Ed780A710b18d8Cb76328E bought tokens with eth 30 ($ 79,138.0306095), received 0.010981892720360105 $TOKENS, 7,206,228.709808868 USD/$TOKEN, 2731.769537721023880295 eth/$TOKEN
(28) End token price = 2737.614545044487840642 eth, 7221647.455424769781529903 $

{ exchangePriceDai: 1.00055439, exchangePriceEth: 2637.93435365 }
(29) Start token price = 2737.614545044487840642 eth, 7221647.45542477 $
(29) Block: 14322170, Timestamp: 1646428442, 0x211be2dDC09c482B27Ed780A710b18d8Cb76328E bought tokens with eth 0.379294650989163 ($ 1,000.55439), received 0.000138555243988233 $TOKENS, 7,221,339.021170311 USD/$TOKEN, 2737.497622402333036007 eth/$TOKEN
(29) End token price = 2737.757444693643719802 eth, 7222024.415318402461707592 $

(30) Start token price = 2737.757444693643719802 eth, 7222024.415318402 $
(30) Block: 14322171, Timestamp: 1646428443, 0x211be2dDC09c482B27Ed780A710b18d8Cb76328E bought tokens with eth 1 ($ 2,637.93435365), received 0.000365262453011757 $TOKENS, 7,222,024.415318402 USD/$TOKEN, 2737.757444693643719802 eth/$TOKEN
(30) End token price = 2738.134189410830458655 eth, 7223018.243150426074862480 $

(31) Start token price = 2738.134189410830458655 eth, 7223018.243150426 $
(31) Block: 14322172, Timestamp: 1646428444, 0x6C0822b5D3A0aEC3869DDdE051573a97856Aeb54 bought tokens with eth 0.3333333333 ($ 879.3114511287355), received 0.000121742982002776 $TOKENS, 7,222,686.980911026 USD/$TOKEN, 2738.008613033638994239 eth/$TOKEN
(31) End token price = 2738.259768950355010020 eth, 7223349.513731853105127811 $

(32) Start token price = 2738.259768950355010020 eth, 7223349.513731853 $
(32) Block: 14322173, Timestamp: 1646428446, 0x8ffd0b26e7a5d1B535BcC3227b44A933FFf0d338 bought tokens with eth 2.45 ($ 6,462.9391664425), received 0.000894639615318545 $TOKENS, 7,224,069.955969151 USD/$TOKEN, 2738.532877428699521261 eth/$TOKEN
(32) End token price = 2739.182747382893012400 eth, 7225784.270246723666787148 $

(33) Start token price = 2739.182747382893012400 eth, 7225784.270246724 $
(33) Block: 14322174, Timestamp: 1646428447, 0x3D4C86aa1f4aE5318e91957287918aDD80f4f4C6 bought tokens with eth 0.38 ($ 1,002.415054387), received 0.000138733423818137 $TOKENS, 7,225,476.217620397 USD/$TOKEN, 2739.065969410044544929 eth/$TOKEN
(33) End token price = 2739.325898304724432819 eth, 7226161.892981179058551788 $

(34) Start token price = 2739.325898304724432819 eth, 7226161.892981179 $
(34) Block: 14322175, Timestamp: 1646428448, 0x58Ba373d9eE46ED5402a6A15fE9CcADc67dE1650 bought tokens with eth 0.77 ($ 2,031.2094523105002), received 0.000281095497806944 $TOKENS, 7,226,047.617829624 USD/$TOKEN, 2739.282578367138739850 eth/$TOKEN
(34) End token price = 2739.615963230351098900 eth, 7226927.065213278867304325 $

(35) Start token price = 2739.615963230351098900 eth, 7226927.065213279 $
(35) Block: 14322176, Timestamp: 1646428449, 0x0e2Bac198dd3646576dbAB5D86130E538f39820b bought tokens with eth 0.001 ($ 2.63793435365), received 0.000000365039735263 $TOKENS, 7,226,430.711027798 USD/$TOKEN, 2739.427803056920765812 eth/$TOKEN
(35) End token price = 2739.616339934523239208 eth, 7226928.058934154920279980 $

(36) Start token price = 2739.616339934523239208 eth, 7226928.058934155 $
(36) Block: 14322177, Timestamp: 1646428451, 0x586075CEa62b415A33050c012c6e1591C1da1c74 bought tokens with eth 0.0015 ($ 3.956901530475), received 0.000000547559508774 $TOKENS, 7,226,431.953185518 USD/$TOKEN, 2739.428273939647169755 eth/$TOKEN
(36) End token price = 2739.616904990762122907 eth, 7226929.549515419639647007 $

(37) Start token price = 2739.616904990762122907 eth, 7226929.54951542 $
(37) Block: 14322178, Timestamp: 1646428452, 0xb44A14dEcD9270E34E2dDaff4CD8690a2Cb88461 bought tokens with eth 0.6 ($ 1,582.76061219), received 0.000219014745835968 $TOKENS, 7,226,730.8127984 USD/$TOKEN, 2739.541566983679331315 eth/$TOKEN
(37) End token price = 2739.842925837517213949 eth, 7227525.777671716175973415 $

(38) Start token price = 2739.842925837517213949 eth, 7227525.777671716 $
(38) Block: 14322179, Timestamp: 1646428454, 0x8B4Ca0c6Ff4B175a776aEA73A251354B6771bccA bought tokens with eth 0.105 ($ 276.98310713325), received 0.000038325722812655 $TOKENS, 7,227,081.103915704 USD/$TOKEN, 2739.674356913352767151 eth/$TOKEN
(38) End token price = 2739.882479147400772490 eth, 7227630.116706658154726028 $

(39) Start token price = 2739.882479147400772490 eth, 7227630.116706658 $
(39) Block: 14322180, Timestamp: 1646428455, 0x1F736b9D5cdeb4933DB97e4f9f8153899E0Ab82f bought tokens with eth 0.3 ($ 791.380306095), received 0.00010949901635805 $TOKENS, 7,227,282.330165154 USD/$TOKEN, 2739.750638663568224729 eth/$TOKEN
(39) End token price = 2739.995488048998140584 eth, 7227928.226770450361073017 $

(40) Start token price = 2739.995488048998140584 eth, 7227928.22677045 $
(40) Block: 14322181, Timestamp: 1646428456, 0x3c7eA1846BC5cb5e043a1CE8B728d4e42d9f2539 bought tokens with eth 0.278 ($ 733.3457503147001), received 0.000101465056694485 $TOKENS, 7,227,569.512160535 USD/$TOKEN, 2739.859504903921333607 eth/$TOKEN
(40) End token price = 2740.100208896891217591 eth, 7228204.473492651246488094 $

(41) Start token price = 2740.100208896891217591 eth, 7228204.473492651 $
(41) Block: 14322182, Timestamp: 1646428458, 0x1F736b9D5cdeb4933DB97e4f9f8153899E0Ab82f bought tokens with eth 0.09 ($ 237.4140918285), received 0.000032847568675272 $TOKENS, 7,227,752.354384386 USD/$TOKEN, 2739.928817555162368080 eth/$TOKEN
(41) End token price = 2740.134111178325838409 eth, 7228293.905485514551401138 $

(42) Start token price = 2740.134111178325838409 eth, 7228293.905485515 $
(42) Block: 14322183, Timestamp: 1646428459, 0x6C0822b5D3A0aEC3869DDdE051573a97856Aeb54 bought tokens with eth 2.22222222222 ($ 5,862.076341438583), received 0.000810922193516497 $TOKENS, 7,228,901.105811611 USD/$TOKEN, 2740.364291404477626202 eth/$TOKEN
(42) End token price = 2740.971181072255149047 eth, 7230502.040915116667747498 $

(43) Start token price = 2740.971181072255149047 eth, 7230502.040915117 $
(43) Block: 14322184, Timestamp: 1646428460, 0xb44A14dEcD9270E34E2dDaff4CD8690a2Cb88461 bought tokens with eth 0.191 ($ 503.84546154715), received 0.000069687203880527 $TOKENS, 7,230,100.125855986 USD/$TOKEN, 2740.818821306905192614 eth/$TOKEN
(43) End token price = 2741.043125124176185636 eth, 7230691.824601219967007637 $

(44) Start token price = 2741.043125124176185636 eth, 7230691.82460122 $
(44) Block: 14322185, Timestamp: 1646428462, 0xc9284a9FD6D8C484bFD7e24f26B1634585f0A296 bought tokens with eth 0.03 ($ 79.13803060949999), received 0.000010945467896994 $TOKENS, 7,230,209.9238017965 USD/$TOKEN, 2740.860444005233148346 eth/$TOKEN
(44) End token price = 2741.054425206762971357 eth, 7230721.633477274328470230 $

(45) Start token price = 2741.054425206762971357 eth, 7230721.633477274 $
(45) Block: 14322186, Timestamp: 1646428463, 0xDb88DB916C76323CE15ED5fe1F50d2f54733Fc70 bought tokens with eth 2.1 ($ 5,539.662142665), received 0.00076607063639699 $TOKENS, 7,231,268.083475085 USD/$TOKEN, 2741.261575925678243948 eth/$TOKEN
(45) End token price = 2741.845410561537846661 eth, 7232808.200917869806289673 $

(46) Start token price = 2741.845410561537846661 eth, 7232808.20091787 $
(46) Block: 14322187, Timestamp: 1646428464, 0x580756206Bc33BDf63F26e46eb1BaD3BC5c53a54 bought tokens with eth 1 ($ 2,637.93435365), received 0.000364717863431694 $TOKENS, 7,232,808.20091787 USD/$TOKEN, 2741.845410561537846661 eth/$TOKEN
(46) End token price = 2742.222056100691588654 eth, 7233801.767124751582741737 $

{ exchangePriceDai: 1.00055439, exchangePriceEth: 2637.93435365 }
(47) Start token price = 2742.222056100691588654 eth, 7233801.767124752 $
(47) Block: 14322188, Timestamp: 1646428467, 0xDe10F01e3f9bF288eF7A91cb4744B4AF3F2797F0 bought tokens with eth 75 ($ 197,845.07652375), received 0.02721211516917227 $TOKENS, 7,270,477.700604557 USD/$TOKEN, 2756.125333651574692340 eth/$TOKEN
(47) End token price = 2770.444572274474012374 eth, 7308250.912086015567183495 $

(48) Start token price = 2770.444572274474012374 eth, 7308250.912086016 $
(48) Block: 14322189, Timestamp: 1646428468, 0xA4e6C2B6264652444B3F0cc1bB37496AE916931c bought tokens with eth 0.374358 ($ 987.5318287637068), received 0.000135131341685546 $TOKENS, 7,307,940.677905188 USD/$TOKEN, 2770.326967308149505698 eth/$TOKEN
(48) End token price = 2770.585315661683580402 eth, 7308622.183902184478938580 $

(49) Start token price = 2770.585315661683580402 eth, 7308622.1839021845 $
(49) Block: 14322190, Timestamp: 1646428469, 0xb44A14dEcD9270E34E2dDaff4CD8690a2Cb88461 bought tokens with eth 0.1 ($ 263.793435365), received 0.000036095660364685 $TOKENS, 7,308,175.905353106 USD/$TOKEN, 2770.416138385357044172 eth/$TOKEN
(49) End token price = 2770.622911382313304784 eth, 7308721.358945184387266636 $

(50) Start token price = 2770.622911382313304784 eth, 7308721.358945184 $
(50) Block: 14322191, Timestamp: 1646428471, 0xb44A14dEcD9270E34E2dDaff4CD8690a2Cb88461 bought tokens with eth 0.06 ($ 158.27606121899998), received 0.00002165716109851 $TOKENS, 7,308,255.246339249 USD/$TOKEN, 2770.446215322652278701 eth/$TOKEN
(50) End token price = 2770.645468771481773729 eth, 7308780.863857000134885311 $

(51) Start token price = 2770.645468771481773729 eth, 7308780.863857 $
(51) Block: 14322192, Timestamp: 1646428472, 0x7157961707E305d5580c8AB29ce6E120Ec01744e bought tokens with eth 0.75 ($ 1,978.4507652375), received 0.000270699636357681 $TOKENS, 7,308,656.900533595 USD/$TOKEN, 2770.598476198208118149 eth/$TOKEN
(51) End token price = 2770.927433401637699717 eth, 7309524.668041402474045753 $

(52) Start token price = 2770.927433401637699717 eth, 7309524.6680414025 $
(52) Block: 14322193, Timestamp: 1646428473, 0xB646B4cD68548D96804e844b7CfBEf4e74b80675 bought tokens with eth 0.0125 ($ 32.974179420625), received 0.000004511427209275 $TOKENS, 7,309,035.010657758 USD/$TOKEN, 2770.741811881918238214 eth/$TOKEN
(52) End token price = 2770.932132769242798531 eth, 7309537.064664648845791817 $

(53) Start token price = 2770.932132769242798531 eth, 7309537.064664649 $
(53) Block: 14322194, Timestamp: 1646428474, 0x2B075EDE4AF705D31464090b41B8D5C3CA9da84c bought tokens with eth 0.0125 ($ 32.974179420625), received 0.000004511419557508 $TOKENS, 7,309,047.407428261 USD/$TOKEN, 2770.746511305346302834 eth/$TOKEN
(53) End token price = 2770.936832135435452074 eth, 7309549.461284168995916843 $

(54) Start token price = 2770.936832135435452074 eth, 7309549.461284169 $
(54) Block: 14322195, Timestamp: 1646428476, 0x50640BFc30F97fef35054beAECE3d3a188A219F0 bought tokens with eth 0.0125 ($ 32.974179420625), received 0.00000451141190577 $TOKENS, 7,309,059.804193833 USD/$TOKEN, 2770.751210726904901094 eth/$TOKEN
(54) End token price = 2770.941531500230667007 eth, 7309561.857900002039968967 $

(55) Start token price = 2770.941531500230667007 eth, 7309561.857900002 $
(55) Block: 14322196, Timestamp: 1646428477, 0x1DD2091f250876Ba87B6fE17e6ca925e1B1c0CF0 bought tokens with eth 0.06 ($ 158.27606121899998), received 0.000021654670636392 $TOKENS, 7,309,095.754751744 USD/$TOKEN, 2770.764839025827768637 eth/$TOKEN
(55) End token price = 2770.964088431652271538 eth, 7309621.361604312434792519 $

(56) Start token price = 2770.964088431652271538 eth, 7309621.361604312 $
(56) Block: 14322197, Timestamp: 1646428478, 0x6519319E8F32F22F7a22274898588f6dc4b40bbf bought tokens with eth 0.075 ($ 197.84507652375), received 0.000027068090384844 $TOKENS, 7,309,162.697141269 USD/$TOKEN, 2770.790215847443050734 eth/$TOKEN
(56) End token price = 2770.992284550354725070 eth, 7309695.741114476695656776 $

(57) Start token price = 2770.992284550354725070 eth, 7309695.741114477 $
(57) Block: 14322198, Timestamp: 1646428479, 0xE41188926607921763D25392475f1156AC5f9033 bought tokens with eth 0.05 ($ 131.8967176825), received 0.000018045240561419 $TOKENS, 7,309,224.680800166 USD/$TOKEN, 2770.813712891185332410 eth/$TOKEN
(57) End token price = 2771.011081934695539530 eth, 7309745.327380388043820858 $

(58) Start token price = 2771.011081934695539530 eth, 7309745.327380388 $
(58) Block: 14322199, Timestamp: 1646428481, 0x1561c3218AB5Feeec5A0a7B817596EAbD257e5a3 bought tokens with eth 0.05 ($ 131.8967176825), received 0.000018045118140746 $TOKENS, 7,309,274.267630108 USD/$TOKEN, 2770.832510489341530047 eth/$TOKEN
(58) End token price = 2771.029879296531362343 eth, 7309794.913586933165788651 $

(59) Start token price = 2771.029879296531362343 eth, 7309794.913586933 $
(59) Block: 14322200, Timestamp: 1646428482, 0xda94DA6D0909E90E81a9B9373a04807c3cE15fBC bought tokens with eth 0.016 ($ 42.2069496584), received 0.000005774411950088 $TOKENS, 7,309,306.994932493 USD/$TOKEN, 2770.844916902086424670 eth/$TOKEN
(59) End token price = 2771.035894447573809884 eth, 7309810.781160510145127773 $

(60) Start token price = 2771.035894447573809884 eth, 7309810.78116051 $
(60) Block: 14322201, Timestamp: 1646428484, 0xb44A14dEcD9270E34E2dDaff4CD8690a2Cb88461 bought tokens with eth 6.26 ($ 16,513.469053849), received 0.002258277358216365 $TOKENS, 7,312,418.465237452 USD/$TOKEN, 2772.024427036845281691 eth/$TOKEN
(60) End token price = 2773.389145546491818095 eth, 7316018.503077111206948757 $

(61) Start token price = 2773.389145546491818095 eth, 7316018.503077111 $
(61) Block: 14322202, Timestamp: 1646428485, 0x4eeD0fc86cf510a0c4800A5e555fEDB7c78fe32B bought tokens with eth 0.32 ($ 844.1389931680001), received 0.000115387610481454 $TOKENS, 7,315,681.377279901 USD/$TOKEN, 2773.261346385476372234 eth/$TOKEN
(61) End token price = 2773.509430063736999728 eth, 7316335.805737364105880260 $

(62) Start token price = 2773.509430063736999728 eth, 7316335.805737364 $
(62) Block: 14322203, Timestamp: 1646428486, 0x14D9fA3a9eaB3CDE8317Ea827c5d88c94e12272E bought tokens with eth 0.325 ($ 857.32866493625), received 0.000117185419468969 $TOKENS, 7,316,001.161418148 USD/$TOKEN, 2773.382571592542262806 eth/$TOKEN
(62) End token price = 2773.631593084293399443 eth, 7316658.063766035251319408 $

(63) Start token price = 2773.631593084293399443 eth, 7316658.063766035 $
(63) Block: 14322204, Timestamp: 1646428487, 0xc9284a9FD6D8C484bFD7e24f26B1634585f0A296 bought tokens with eth 0.009 ($ 23.74140918285), received 0.000003245061242667 $TOKENS, 7,316,166.755403908 USD/$TOKEN, 2773.445345704237297468 eth/$TOKEN
(63) End token price = 2773.634976046738756850 eth, 7316666.987798887304961681 $

(64) Start token price = 2773.634976046738756850 eth, 7316666.987798887 $
(64) Block: 14322205, Timestamp: 1646428488, 0x2770736960c4739f96d3a033676ff0e34e71fC63 bought tokens with eth 0.0965 ($ 254.560665127225), received 0.00003479401901688 $TOKENS, 7,316,219.06063014 USD/$TOKEN, 2773.465173804265305080 eth/$TOKEN
(64) End token price = 2773.671248876057234156 eth, 7316762.673141450621187687 $

(65) Start token price = 2773.671248876057234156 eth, 7316762.673141451 $
(65) Block: 14322206, Timestamp: 1646428490, 0x9dEBaE598dB0b4bBB53308AB7894De7Cc0D5326b bought tokens with eth 0.1 ($ 263.793435365), received 0.000036055498146548 $TOKENS, 7,316,316.482241029 USD/$TOKEN, 2773.502104825977312430 eth/$TOKEN
(65) End token price = 2773.708837211902391573 eth, 7316861.828703872859477997 $

(66) Start token price = 2773.708837211902391573 eth, 7316861.828703873 $
(66) Block: 14322207, Timestamp: 1646428491, 0xdbbF7481e3E38Ae10c9579CfA541C932c5c9a05D bought tokens with eth 0.34 ($ 896.8976802410001), received 0.000122585038707903 $TOKENS, 7,316,534.625225659 USD/$TOKEN, 2773.584799448126887000 eth/$TOKEN
(66) End token price = 2773.836636881395861565 eth, 7317198.955842414870858192 $

(67) Start token price = 2773.836636881395861565 eth, 7317198.955842415 $
(67) Block: 14322208, Timestamp: 1646428492, 0x979Db9f8D937E19e36DFDB5Fe3a48a207A5c7991 bought tokens with eth 0.15 ($ 395.6901530475), received 0.000054079839094341 $TOKENS, 7,316,777.558402641 USD/$TOKEN, 2773.676891647708998789 eth/$TOKEN
(67) End token price = 2773.893018758194557449 eth, 7317347.687532145529985428 $

(68) Start token price = 2773.893018758194557449 eth, 7317347.6875321455 $
(68) Block: 14322209, Timestamp: 1646428494, 0xA4e6C2B6264652444B3F0cc1bB37496AE916931c bought tokens with eth 0.34 ($ 896.8976802410001), received 0.000122576898851895 $TOKENS, 7,317,020.48788726 USD/$TOKEN, 2773.768982447574217076 eth/$TOKEN
(68) End token price = 2774.020816930225464603 eth, 7317684.810720479115843773 $

{ exchangePriceDai: 1.00055439, exchangePriceEth: 2637.93435365 }
(69) Start token price = 2774.020816930225464603 eth, 7317684.810720479 $
(69) Block: 14322210, Timestamp: 1646428496, 0x58E12A716B8cE86865D9482A30652a52A0359984 bought tokens with eth 0.01896473254945815 ($ 50.0277195), received 0.000006837004600773 $TOKENS, 7,317,198.454765382 USD/$TOKEN, 2773.836446930864440219 eth/$TOKEN
(69) End token price = 2774.027945305958837707 eth, 7317703.614907712675631046 $

{ exchangePriceDai: 1.00055439, exchangePriceEth: 2637.93435365 }
(70) Start token price = 2774.027945305958837707 eth, 7317703.614907713 $
(70) Block: 14322211, Timestamp: 1646428498, 0x58E12A716B8cE86865D9482A30652a52A0359984 bought tokens with eth 0.01896473254945815 ($ 50.0277195), received 0.000006836987030456 $TOKENS, 7,317,217.25917379 USD/$TOKEN, 2773.843575390441856143 eth/$TOKEN
(70) End token price = 2774.035073678466687852 eth, 7317722.419086436741054058 $

(71) Start token price = 2774.035073678466687852 eth, 7317722.419086437 $
(71) Block: 14322212, Timestamp: 1646428500, 0x0F9D7257a592c7d4359D6059811e07A9A1Cff110 bought tokens with eth 0.01 ($ 26.379343536500002), received 0.000003605098882974 $TOKENS, 7,317,231.619105702 USD/$TOKEN, 2773.849019017911814444 eth/$TOKEN
(71) End token price = 2774.038832429098874854 eth, 7317732.334423855878412724 $

(72) Start token price = 2774.038832429098874854 eth, 7317732.334423856 $
(72) Block: 14322213, Timestamp: 1646428501, 0x9AB301FD4F2519af93cA316B4fCD7D26aBd2f9E9 bought tokens with eth 0.1 ($ 263.793435365), received 0.000036050720146071 $TOKENS, 7,317,286.153956334 USD/$TOKEN, 2773.869692333969396714 eth/$TOKEN
(72) End token price = 2774.076419885937411891 eth, 7317831.487667516805231571 $

(73) Start token price = 2774.076419885937411891 eth, 7317831.487667517 $
(73) Block: 14322214, Timestamp: 1646428502, 0x3dF364ED7e8A887f7f9c240f7e281A4ea05CE03f bought tokens with eth 0.15 ($ 395.6901530475), received 0.000054075164275457 $TOKENS, 7,317,410.096654874 USD/$TOKEN, 2773.916677088676806306 eth/$TOKEN
(73) End token price = 2774.132800902688359201 eth, 7317980.217088497243821621 $

(74) Start token price = 2774.132800902688359201 eth, 7317980.217088497 $
(74) Block: 14322215, Timestamp: 1646428503, 0xab5d306E643cDba074a4251e9E1A4FEC5a8e05Ee bought tokens with eth 0.06 ($ 158.27606121899998), received 0.000021629757962495 $TOKENS, 7,317,514.208593706 USD/$TOKEN, 2773.956144309946921567 eth/$TOKEN
(74) End token price = 2774.155353252770964900 eth, 7318039.708707535639405251 $

(75) Start token price = 2774.155353252770964900 eth, 7318039.708707536 $
(75) Block: 14322216, Timestamp: 1646428505, 0x8269CAe3EfbC4D768D9d86AE3747253D15BF6929 bought tokens with eth 0.03 ($ 79.13803060949999), received 0.00001081481303687 $TOKENS, 7,317,558.827850431 USD/$TOKEN, 2773.973058778141876246 eth/$TOKEN
(75) End token price = 2774.166629415680745296 eth, 7318069.454485053196549416 $

(76) Start token price = 2774.166629415680745296 eth, 7318069.454485053 $
(76) Block: 14322217, Timestamp: 1646428506, 0x616001B6A176961849c8E1422A5D95A9dBBC4739 bought tokens with eth 0.013 ($ 34.29314659745), received 0.000004686405329853 $TOKENS, 7,317,580.14591659 USD/$TOKEN, 2773.981140126386435441 eth/$TOKEN
(76) End token price = 2774.171515750431353808 eth, 7318082.344315354712307453 $

(77) Start token price = 2774.171515750431353808 eth, 7318082.344315355 $
(77) Block: 14322218, Timestamp: 1646428507, 0xa51Ec9A7dBd81db527CB3fD15abD32bBbDa8e785 bought tokens with eth 0.3 ($ 791.380306095), received 0.000108145522005968 $TOKENS, 7,317,735.320111801 USD/$TOKEN, 2774.039964257091924082 eth/$TOKEN
(77) End token price = 2774.284276899601991317 eth, 7318379.800824509002268314 $

(78) Start token price = 2774.284276899601991317 eth, 7318379.800824509 $
(78) Block: 14322219, Timestamp: 1646428508, 0xB159DE0DdDAb4a997F1c22fcf1C939d3317D9EC6 bought tokens with eth 3 ($ 7,913.80306095), received 0.00108121351332628 $TOKENS, 7,319,371.209673215 USD/$TOKEN, 2774.660104617730667087 eth/$TOKEN
(78) End token price = 2775.411843915076588019 eth, 7321354.248590672388672829 $

{ exchangePriceDai: 1.00055439, exchangePriceEth: 2637.93435365 }
(79) Start token price = 2775.411843915076588019 eth, 7321354.248590672 $
(79) Block: 14322220, Timestamp: 1646428511, 0xef5939492958abb8488ce5A5C68D61Ac29C07732 bought tokens with eth 0.1896473254945815 ($ 500.277195), received 0.000068334986704787 $TOKENS, 7,320,952.547503088 USD/$TOKEN, 2775.259565263021158898 eth/$TOKEN
(79) End token price = 2775.483121221009241708 eth, 7321542.273444627411663532 $

(80) Start token price = 2775.483121221009241708 eth, 7321542.273444627 $
(80) Block: 14322221, Timestamp: 1646428512, 0xb3005148e7b58BfF2f82CBe63416363243349949 bought tokens with eth 0.05 ($ 131.8967176825), received 0.000018016040469789 $TOKENS, 7,321,071.347706888 USD/$TOKEN, 2775.304600577730980149 eth/$TOKEN
(80) End token price = 2775.501913234462790570 eth, 7321591.845542491413652897 $

(81) Start token price = 2775.501913234462790570 eth, 7321591.845542491 $
(81) Block: 14322222, Timestamp: 1646428513, 0x7929fF721516111056b3b36259846F9B942400a9 bought tokens with eth 0.1 ($ 263.793435365), received 0.000036031714971575 $TOKENS, 7,321,145.706583868 USD/$TOKEN, 2775.332788874713060068 eth/$TOKEN
(81) End token price = 2775.539497194002706237 eth, 7321690.989560507237911224 $

(82) Start token price = 2775.539497194002706237 eth, 7321690.989560507 $
(82) Block: 14322223, Timestamp: 1646428514, 0x511E061Bc0082BF14de5Cf2A6eeC624Df585fa52 bought tokens with eth 0.124903 ($ 329.48591457394593), received 0.000045004007607528 $TOKENS, 7,321,257.196633117 USD/$TOKEN, 2775.375053023210512038 eth/$TOKEN
(82) End token price = 2775.586440560851769987 eth, 7321814.823080594651401043 $


    ############################################################
    #                  Writing csv file                        #
    ############################################################

Write csv file successful!

  ############################################################
  #                          Summary                         #
  ############################################################

BigNumber.toString does not accept any parameters; base-10 is assumed
┌─────────────────────┬──────────────────────────┬────────────┐
│       (index)       │          value           │ percentage │
├─────────────────────┼──────────────────────────┼────────────┤
│    Total supply     │ '6272.801201749082 eth'  │            │
│  Total supply USD   │ '16,547,237.783710908 $' │            │
│ Total minted tokens │ '10.077237004861653259'  │  '100 %'   │
│   Airdrop budget    │  '4.030894801944661303'  │   '40 %'   │
│ Staking incentives  │  '1.007723700486165325'  │   '10 %'   │
│   Liquidity pool    │  '2.015447400972330651'  │   '20 %'   │
│      Treasury       │  '3.02317110145849598'   │   '30 %'   │
└─────────────────────┴──────────────────────────┴────────────┘

```

## Transaction snapshot and application to a bonding curve for token claims

Computing a users token from a bonding curve at the time of the contribution expends unnecessary gas and time for the transaction. This repository proposes using a Gnosis Safe address for a token offering where users send their contributions during a window of time (start and end block) after which, the addresses are extracted from the blockchain (certain addresses maybe replaced with verified transaction hashes - such as ETH, DAI sent from Coinbase or other custodial services), then applied to a bonding curve to compute the possible token distribution, off chain. Finally, the token distribution is provided to a Merkle distributor for token holders to claim. A price oracle provide block-level pricing in order to properly convert DAI to ETH and apply along the bonding curve.

### Environment variables

The file `environment.ts` imports the following and enforces some value before proceeding further in the application.

- keys are without the preceding 0x
- Etherscan enables verification of contracts
- Alchemy enables use of the particular network (mainnet, ropsten, rinkeby, kovan)
- Ganache enables use of the Ganache tooling
- see `environment.ts` for all required variables

```bash
NODE_ENV=development
VERBOSE=true
PUBLIC_KEY=
PRIVATE_KEY=
INFURA_API_KEY=
ETHERSCAN_API_KEY=
MAINNET_ALCHEMY_API_KEY=
ROPSTEN_ALCHEMY_API_KEY=
RINKEBY_ALCHEMY_API_KEY=
REPORT_GAS=true
GANACHE=ganache-cli --account "private-key"
```

### Deploy Bonding Curve

Bonding Curve contracts employing the Bancor Formula - also executable as a standalone CLI to simulate and price the tokens.

```bash
yarn && yarn run build && yarn run compile
npx hardhat run scripts/deploy.ts --network rinkeby
```

#### Tests

```bash
yarn && yarn run build && yarn run compile
npx hardhat test
```

### Simulation Bonding Curve

```bash
  npx ts-node ./scripts/bonding-curve-simulator.ts
```

Parameters:

-t, --token, Collateral token address (ETH or DAI)

-vs, --virtual_supply, Virtual supply (default: 5)

-vb, --virtual_balance, Virtual balance (default: 4)

-r, --reserve_ratio, Reserve-ratio (default: '150000')

-c, --count, Count using accounts (default: 100)

-i, --input, Input data file (default: './example-data/freerossdao-contributors.csv')

-o, --output, Output data file (default: './example-data/accountsData.csv')

### Merkle distributor

Generate merkle root

```bash
npx ts-node ./merkle-distributor/index.ts -i ./example-data/merkle-data/accounts-info.json -o ./example-data/merkle-data/accounts-merkle-root.json
```

Verify merkle root

```bash
npx ts-node ./merkle-distributor/verify-merkle-root.ts -i  ./example-data/merkle-data/accounts-merkle-root.json
```

#### Bonding-curve simulation

The following script will apply the smart contract bonding curve with purchase data from the `csv` file.
`npx ts-node ./scripts/bonding-curve-simulator.ts -vs 1000000 -vb 0.0001 -r 150000 -i ./example-data/endowment-contributors.csv -o ./example-data/merkle-data/accounts-info.csv`

The above output is configured by default in the `environment.ts` however, these may be overridden.

```bash
    ############################################################
    #                   Deploy Contracts                       #
    ############################################################

Deployed BancorFormula to the following address => 0xEfb069f1e93955596DA66809D814E395E39Ec834
Deployed BondingCurve to the following address => 0x3f458FDD6D5E13Af5D6f966A338bf9373a248336
Deployed Endowment to the following address => 0x1b22d7162067A0FaeCc21b5d84421c1e383eAa56
Deployed DaoRegistry to the following address => 0x4AF2FE91Ef78e76c91aa77eF5b43973eAb371A66

    ############################################################
    #                   Initialize Curve                       #
    ############################################################

Bonding curve initialization parameters:
Formula: 0xEfb069f1e93955596DA66809D814E395E39Ec834
Movement: 0x4AF2FE91Ef78e76c91aa77eF5b43973eAb371A66
Endowment: 0x1b22d7162067A0FaeCc21b5d84421c1e383eAa56
Initiative_goal: 1000000000000000000
Beneficiary: 0x1b22d7162067A0FaeCc21b5d84421c1e383eAa56
BuyFeePct: 0
SellFeePct: 0
TimeStart: 1644573761
TimeCooldown: 1644672761
TimeEnd: 1654572761

  ############################################################
  #                   Add collateral token                   #
  ############################################################

Zero Token: 0x0000000000000000000000000000000000000000
Token Parameters: 1000000000000000000000000,100000000000000,true,150000
Price 1 token = 3.3544311183403983e-7 Ξ
Price 1 token in USD = 0.001031381585339944 USD

  ############################################################
  #                   Make Buy Order                         #
  ############################################################

(1) Start token price = 3.3544311183403983e-7 Ξ, 0.0009047127048558191 $
(1) Block: 14184010, Timestamp: 1644582765, 0xB66426c5D88309668dBE013C118831642F532DD0 bought tokens with Ξ 57.325246818563798504 ($ 154,610.05838572534), received 6,307,216.983141668399785828 $TOKENS, 0.024513197944351205 USD/$TOKEN, 0.000009088833787038939 Ξ/$TOKEN
(1) End token price = 0.00005268666874396533 Ξ, 0.14209950035515492 $

(2) Start token price = 0.00005268666874396533 Ξ, 0.14209950035515492 $
(2) Block: 14184011, Timestamp: 1644582766, 0xfE021e62637Cf8B880a76b09E94904693D38256A bought tokens with Ξ 79.93165732598 ($ 215,581.07277150973), received 1,022,498.687853256920945235 $TOKENS, 0.21083750554646058 USD/$TOKEN, 0.00007817287031809993 Ξ/$TOKEN
(2) End token price = 0.00011019296717246168 Ξ, 0.29719786714836255 $

(3) Start token price = 0.00011019296717246168 Ξ, 0.29719786714836255 $
(3) Block: 14184012, Timestamp: 1644582767, 0x58F09dd6DF8dFCe8c209A00BaE4348002BACac1d bought tokens with Ξ 687.175562 ($ 1,853,358.854229272), received 2,570,203.333840337696583598 $TOKENS, 0.7210942534496003 USD/$TOKEN, 0.0002673623339260238 Ξ/$TOKEN
(3) End token price = 0.0005045037289012136 Ξ, 1.360680595551721 $

(4) Start token price = 0.0005045037289012136 Ξ, 1.360680595551721 $
(4) Block: 14184013, Timestamp: 1644582768, 0xe4918B846156782a8454AcB1332BEeeA9B523763 bought tokens with Ξ 0.4 ($ 1,078.826987872), received 793.103465446277896285 $TOKENS, 1.3602600856937952 USD/$TOKEN, 0.0005043478151680004 Ξ/$TOKEN
(4) End token price = 0.0005047116550722264 Ξ, 1.3612413864636548 $

(5) Start token price = 0.0005047116550722264 Ξ, 1.5124608285864654 $
(5) Block: 14184014, Timestamp: 1644582770, 0xb44A14dEcD9270E34E2dDaff4CD8690a2Cb88461 bought tokens with Ξ 1.92697 ($ 5,774.51820969775), received 3,816.141642227051749241 $TOKENS, 1.5131823582753112 USD/$TOKEN, 0.000504952431187917 Ξ/$TOKEN
(5) End token price = 0.0005057131121536142 Ξ, 1.5154618779814764 $

(6) Start token price = 0.0005057131121536142 Ξ, 1.3639423837801463 $
(6) Block: 14184015, Timestamp: 1644582771, 0xdeFD0dE775d82A61D1A93efC18913e7B16906e1c bought tokens with Ξ 1.2 ($ 3,236.4809636160003), received 2,372.643178089263917174 $TOKENS, 1.3640824686594475 USD/$TOKEN, 0.0005057650518551144 Ξ/$TOKEN
(6) End token price = 0.0005063365820330845 Ξ, 1.3656239241103911 $

(7) Start token price = 0.0005063365820330845 Ξ, 1.3656239241103911 $
(7) Block: 14184016, Timestamp: 1644582773, 0xAE13245d7ab6621b8583F5a734F8F8728dE4Dcd1 bought tokens with Ξ 0.766923 ($ 2,068.443075049395), received 1,514.831653285004304712 $TOKENS, 1.3654606903439406 USD/$TOKEN, 0.0005062760593475063 Ξ/$TOKEN
(7) End token price = 0.0005067349722332949 Ξ, 1.3666984093596177 $

(8) Start token price = 0.0005067349722332949 Ξ, 1.3666984093596177 $
(8) Block: 14184017, Timestamp: 1644582775, 0xC5c8eff68183581f8a108CE6414a21a6675A4b79 bought tokens with Ξ 1.5 ($ 4,045.6012045200005), received 2,959.369243038568774003 $TOKENS, 1.3670484729259837 USD/$TOKEN, 0.0005068647663783437 Ξ/$TOKEN
(8) End token price = 0.0005075140111003548 Ξ, 1.3687995297455815 $

(9) Start token price = 0.0005075140111003548 Ξ, 1.3687995297455815 $
(9) Block: 14184018, Timestamp: 1644582777, 0x2843b4E0e0B7B812C1B574C77a54308dAed0d0A2 bought tokens with Ξ 0.11433 ($ 308.3557238085144), received 225.376671983980772053 $TOKENS, 1.368179417568255 USD/$TOKEN, 0.0005072840902013422 Ξ/$TOKEN
(9) End token price = 0.0005075733807842879 Ξ, 1.3689596537888025 $

(10) Start token price = 0.0005075733807842879 Ξ, 1.5210365133327037 $
(10) Block: 14184019, Timestamp: 1644582778, 0x58Ba373d9eE46ED5402a6A15fE9CcADc67dE1650 bought tokens with Ξ 0.87 ($ 2,607.1141960887), received 1,714.15182731001348803 $TOKENS, 1.5209354005590017 USD/$TOKEN, 0.0005075396392192836 Ξ/$TOKEN
(10) End token price = 0.0005080251173112799 Ξ, 1.5223902244963965 $

(11) Start token price = 0.0005080251173112799 Ξ, 1.3701780176806189 $
(11) Block: 14184020, Timestamp: 1644582779, 0x872C95b2284e089FCB205D5DcF8E40b9E4Caea97 bought tokens with Ξ 1.12 ($ 3,020.7155660416006), received 2,204.480281915431740672 $TOKENS, 1.3702620027142889 USD/$TOKEN, 0.0005080562567004921 Ξ/$TOKEN
(11) End token price = 0.0005086065588470551 Ξ, 1.371746204732279 $

(12) Start token price = 0.0005086065588470551 Ξ, 1.5241326204528507 $
(12) Block: 14184021, Timestamp: 1644582780, 0x74F2305790da72386a1d1d32d82b8DB8164C0704 bought tokens with Ξ 3 ($ 8,990.04895203), received 5,892.46001050876878545 $TOKENS, 1.5256868839155309 USD/$TOKEN, 0.0005091252201372127 Ξ/$TOKEN
(12) End token price = 0.0005101634142437709 Ξ, 1.5287980225287532 $

(13) Start token price = 0.0005101634142437709 Ξ, 1.5287980225287532 $
(13) Block: 14184022, Timestamp: 1644582781, 0x211be2dDC09c482B27Ed780A710b18d8Cb76328E bought tokens with Ξ 1 ($ 2,996.68298401), received 1,960.156240294743863162 $TOKENS, 1.5287980225287532 USD/$TOKEN, 0.0005101634142437709 Ξ/$TOKEN
(13) End token price = 0.0005106821796569437 Ξ, 1.5303525980151007 $

(14) Start token price = 0.0005106821796569437 Ξ, 1.5303525980151007 $
(14) Block: 14184023, Timestamp: 1644582782, 0x6C0822b5D3A0aEC3869DDdE051573a97856Aeb54 bought tokens with Ξ 0.3333333333 ($ 998.8943279034438), received 652.942710986275155399 $TOKENS, 1.529834564497406 USD/$TOKEN, 0.0005105093106813266 Ξ/$TOKEN
(14) End token price = 0.0005108550807929292 Ξ, 1.5308707279072244 $

(15) Start token price = 0.0005108550807929292 Ξ, 1.5308707279072244 $
(15) Block: 14184024, Timestamp: 1644582783, 0x8ffd0b26e7a5d1B535BcC3227b44A933FFf0d338 bought tokens with Ξ 2.45 ($ 7,341.873310824501), received 4,792.355393307933753564 $TOKENS, 1.5319968383556704 USD/$TOKEN, 0.0005112308664380757 Ξ/$TOKEN
(15) End token price = 0.0005121255875735597 Ξ, 1.5346780339578094 $

(16) Start token price = 0.0005121255875735597 Ξ, 1.5346780339578094 $
(16) Block: 14184025, Timestamp: 1644582784, 0x3D4C86aa1f4aE5318e91957287918aDD80f4f4C6 bought tokens with Ξ 0.38 ($ 1,138.7395339238), received 742.23838235744926102 $TOKENS, 1.5341965074711033 USD/$TOKEN, 0.0005119649010780993 Ξ/$TOKEN
(16) End token price = 0.0005123225959165225 Ξ, 1.535268405506874 $

(17) Start token price = 0.0005123225959165225 Ξ, 1.535268405506874 $
(17) Block: 14184026, Timestamp: 1644582785, 0x0e2Bac198dd3646576dbAB5D86130E538f39820b bought tokens with Ξ 0.001 ($ 2.99668298401), received 1.952882116097198368 $TOKENS, 1.5344925120205515 USD/$TOKEN, 0.0005120636784766522 Ξ/$TOKEN
(17) End token price = 0.0005123231143418914 Ξ, 1.5352699590633554 $

(18) Start token price = 0.0005123231143418914 Ξ, 1.5352699590633554 $
(18) Block: 14184027, Timestamp: 1644582787, 0x586075CEa62b415A33050c012c6e1591C1da1c74 bought tokens with Ξ 0.0015 ($ 4.495024476015), received 2.929319466675592682 $TOKENS, 1.5344944541389625 USD/$TOKEN, 0.0005120643265660302 Ξ/$TOKEN
(18) End token price = 0.0005123238919797712 Ξ, 1.5352722893975574 $

(19) Start token price = 0.0005123238919797712 Ξ, 1.5352722893975574 $
(19) Block: 14184028, Timestamp: 1644582788, 0x8B4Ca0c6Ff4B175a776aEA73A251354B6771bccA bought tokens with Ξ 0.105 ($ 314.65171332104995), received 205.041307864085385431 $TOKENS, 1.534577186415634 USD/$TOKEN, 0.0005120919345169255 Ξ/$TOKEN
(19) End token price = 0.0005123783261137583 Ξ, 1.5354354112406259 $

(20) Start token price = 0.0005123783261137583 Ξ, 1.545068234025133 $
(20) Block: 14184029, Timestamp: 1644582789, 0x1F736b9D5cdeb4933DB97e4f9f8153899E0Ab82f bought tokens with Ξ 0.39 ($ 1,176.0384476841), received 761.391224715746459509 $TOKENS, 1.5445915444102414 USD/$TOKEN, 0.0005122202454403128 Ξ/$TOKEN
(20) End token price = 0.0005125805011065 Ξ, 1.5456778893190422 $

(21) Start token price = 0.0005125805011065 Ξ, 1.5360412656011677 $
(21) Block: 14184030, Timestamp: 1644582790, 0x3c7eA1846BC5cb5e043a1CE8B728d4e42d9f2539 bought tokens with Ξ 0.278 ($ 833.07786955478), received 542.551870931652170714 $TOKENS, 1.5354805949231105 USD/$TOKEN, 0.0005123934040124634 Ξ/$TOKEN
(21) End token price = 0.0005127246069979795 Ξ, 1.53647310527406 $


    ############################################################
    #                  Writing csv file                        #
    ############################################################

Write csv file successful!

  ############################################################
  #                          Summary                         #
  ############################################################

BigNumber.toString does not accept any parameters; base-10 is assumed
┌─────────────────────┬─────────────────────────────────────┬────────────┐
│       (index)       │                value                │ percentage │
├─────────────────────┼─────────────────────────────────────┼────────────┤
│    Total supply     │        '840.2695224778438 Ξ'        │            │
│  Total supply USD   │      '2,518,021.3799915626 $'       │            │
│ Total minted tokens │ '9,931,073,122,141,108,037,582,130' │  '100 %'   │
│   Airdrop budget    │ '3,972,429,248,856,443,215,032,852' │   '40 %'   │
│ Staking incentives  │  '993,107,312,214,110,803,758,213'  │   '10 %'   │
│   Liquidity pool    │ '1,986,214,624,428,221,607,516,426' │   '20 %'   │
│      Treasury       │ '2,979,321,936,642,332,411,274,639' │   '30 %'   │
└─────────────────────┴─────────────────────────────────────┴────────────┘
```

### Snapshot Data for Token Distribution

The following `environment` variables describe a contract address, Gnosis Safe address, its deployment block number, and the block number in which

```bash
PROVIDER_ENDPOINT: str({ default: PROVIDER_ENDPOINT }),
SAFE_ADDRESS: str({ default: '0xc102d2544a7029f7BA04BeB133dEADaA57fDF6b4' }),
SAFE_DEPLOYED_IN_BLOCK: num({ default: 13_724_221 }),
AUCTION_ENDED_IN_BLOCK: num({ default: 13_770_208 }),
BLOCKS_PER_CHUNK: num({ default: 1 }),
SNAPSHOT_FILENAME: str({ default: 'snapshot.csv' }),
NEXT_BLOCK_INFO: str({ default: 'next.json' }),
MERKLE_DISTRIBUTOR: bool({ default: false }),
```

#### Run snapshot

```bash
ts-node ./snapshot/index.ts
```

# Example deployment

### deploy, rinkeby

- `npx hardhat run ./scripts/deploy.ts --network rinkeby` - deploys the contracts to rinkeby and then verifies the contracts

```bash
No need to generate any newer typings.
  Setup Admin and Unnamed Accounts
    Creating Contract
Deployed Tokens to the following address => 0x9977fE56469362E684207b0202b58be93b4aE800
Deployed BancorFormula to the following address => 0x80C4fDeA03A55E964beD7F38EC3200fd110Cc767
Deployed BondingCurveVault to the following address => 0x57E15fc7bbA5c416aAd2f29d6412D272d7a3A695
deployed contract to => 0x9977fE56469362E684207b0202b58be93b4aE800:0x9977fE56469362E684207b0202b58be93b4aE800 (wei)
      ✓ should return BondingCurveToken contract constructor initial state
(+)     0xAEC83a250F421683b7db56B2AbE2595aD5Bc0E4B:9999967048216000000000
(0)     0x6990520c50b637bE1Bb3a4BAcF2423FAD149CdeD:10000000000000000000000
(1)     0xE3e17172D7476fa3f3683721321ecFDE8EDbd99c:10000000000000000000000
(2)     0x24E0B0fAecc75841CB898A8c767F4B8d273dB8D3:10000000000000000000000
(3)     0x98E51A5BaDd4A1aA6D84D95A5251a6Aee26fEE2A:10000000000000000000000
(4)     0x72929D343433Db055ED596aae073Dbc51171a7A7:10000000000000000000000
(5)     0x043cE78acE9988fa9598F0d4C3C01634b63bD944:10000000000000000000000
(6)     0x5BC8Dc70f8A3bf8fB753D2f9D35D85787B89f6F6:10000000000000000000000
(7)     0xc9D030B6eb08443c647957dF613193EEc66e7023:10000000000000000000000
(8)     0xAc84F2E8f902f80E357cCA5E290BF4700B69F8C1:10000000000000000000000
(9)     0xEd6c726fB734CD91e5A27288b900322c2a602Cc7:10000000000000000000000
(10)    0x8983b25B6424927A0e6a6654dcAf3CE9A1335B47:10000000000000000000000
(11)    0xBd5BC69B4465d03159CC40701c642CD687D43D94:10000000000000000000000
(12)    0x818e9e5d5d60287f71232dfd71003F2D4491763e:10000000000000000000000
(13)    0xB53AA4499cdd8E2C45335f514E4c7cdC7211743C:10000000000000000000000
(14)    0x343518235FAdd80D3BCDb91817faBA5AF20F3Dc4:10000000000000000000000
(15)    0xA4e6c47307E26f18B331136ab062FBEA961de08E:10000000000000000000000
(16)    0xb7ad0aE20F8bF6264838B1865FE4b0BF0568eB29:10000000000000000000000
(17)    0xae1100C83375A5D03e7C04448A72F0758007fcF3:10000000000000000000000
(18)    0x358b7277CBE3d96dA3b4c489F09C1b73de4F260B:10000000000000000000000
🎉🎉🎉 Let's start fondling the contract

(+)     0xAEC83a250F421683b7db56B2AbE2595aD5Bc0E4B:9999967048216000000000
(0)     0x6990520c50b637bE1Bb3a4BAcF2423FAD149CdeD:10000000000000000000000
(1)     0xE3e17172D7476fa3f3683721321ecFDE8EDbd99c:10000000000000000000000
(2)     0x24E0B0fAecc75841CB898A8c767F4B8d273dB8D3:10000000000000000000000
(3)     0x98E51A5BaDd4A1aA6D84D95A5251a6Aee26fEE2A:10000000000000000000000
(4)     0x72929D343433Db055ED596aae073Dbc51171a7A7:10000000000000000000000
(5)     0x043cE78acE9988fa9598F0d4C3C01634b63bD944:10000000000000000000000
(6)     0x5BC8Dc70f8A3bf8fB753D2f9D35D85787B89f6F6:10000000000000000000000
(7)     0xc9D030B6eb08443c647957dF613193EEc66e7023:10000000000000000000000
(8)     0xAc84F2E8f902f80E357cCA5E290BF4700B69F8C1:10000000000000000000000
(9)     0xEd6c726fB734CD91e5A27288b900322c2a602Cc7:10000000000000000000000
(10)    0x8983b25B6424927A0e6a6654dcAf3CE9A1335B47:10000000000000000000000
(11)    0xBd5BC69B4465d03159CC40701c642CD687D43D94:10000000000000000000000
(12)    0x818e9e5d5d60287f71232dfd71003F2D4491763e:10000000000000000000000
(13)    0xB53AA4499cdd8E2C45335f514E4c7cdC7211743C:10000000000000000000000
(14)    0x343518235FAdd80D3BCDb91817faBA5AF20F3Dc4:10000000000000000000000
(15)    0xA4e6c47307E26f18B331136ab062FBEA961de08E:10000000000000000000000
(16)    0xb7ad0aE20F8bF6264838B1865FE4b0BF0568eB29:10000000000000000000000
(17)    0xae1100C83375A5D03e7C04448A72F0758007fcF3:10000000000000000000000
(18)    0x358b7277CBE3d96dA3b4c489F09C1b73de4F260B:10000000000000000000000
      ✓ should display unnamed addresses and balances again

·-----------------------|---------------------------|-------------|-----------------------------·
|  Solc version: 0.8.4  ·  Optimizer enabled: true  ·  Runs: 800  ·  Block limit: 12450000 gas  │
························|···························|·············|······························
|  Methods                                                                                      │
·············|··········|·············|·············|·············|···············|··············
|  Contract  ·  Method  ·  Min        ·  Max        ·  Avg        ·  # calls      ·  usd (avg)  │
·············|··········|·············|·············|·············|···············|··············
|  Deployments          ·                                         ·  % of limit   ·             │
························|·············|·············|·············|···············|··············
|  BancorFormula        ·          -  ·          -  ·    3023207  ·       24.3 %  ·          -  │
························|·············|·············|·············|···············|··············
|  BondingCurveToken    ·          -  ·          -  ·     849419  ·        6.8 %  ·          -  │
························|·············|·············|·············|···············|··············
|  BondingCurveVault    ·          -  ·          -  ·     246347  ·          2 %  ·          -  │
·-----------------------|-------------|-------------|-------------|---------------|-------------·

  4 passing (864ms)

Time: 0h:00m:05s
```

### deploy

`yarn run deploy:rinkeby `

```bash
Nothing to compile
No need to generate any newer typings.
Compiling 1 file with 0.8.4
Successfully submitted source code for contract
contracts/bondingcurve/BondingCurveToken.sol:BondingCurveToken at 0x83598Df17253233CBe42aFb4AE1d331454ba35E1
for verification on Etherscan. Waiting for verification result...
Successfully verified contract BondingCurveToken on Etherscan.
https://rinkeby.etherscan.io/address/0x83598Df17253233CBe42aFb4AE1d331454ba35E1#code
```

### verify

`npx hardhat verify --network rinkeby 0x83598Df17253233CBe42aFb4AE1d331454ba35E1`

```bash
No need to generate any newer typings.
Contract deployed to: 0x83598Df17253233CBe42aFb4AE1d331454ba35E1
Verify using: npx hardhat verify --network rinkeby 0x83598Df17253233CBe42aFb4AE1d331454ba35E1
Time: 0h:00m:12s
```

Updated deployment script combines the deploy and verification into one command.

### Reading

- [Converting between bancor and bonding curve price formulas](https://billyrennekamp.medium.com/converting-between-bancor-and-bonding-curve-price-formulas-9c11309062f5)
- [Bonding curve ](https://www.desmos.com/calculator/7wbvkts2jf)
- [OpenSea Storefront](https://etherscan.io/token/0x495f947276749ce646f68ac8c248420045cb7b5e)
